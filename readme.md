# @funbox/blueprinter-frontend

Рендерер API Blueprint - утилита, получающая на вход AST API в формате Elements и генерирующая HTML-страницу с документацией.

## Установка библиотеки

```
npm install --save @funbox/blueprinter-frontend
```

## Использование библиотеки

Добавить команды в `package.json`:

```json
{
  "scripts": {
    "dev": "node node_modules/@funbox/blueprinter-frontend/bin/index.js -i doc.apib -s -p 3000",
    "doc": "node node_modules/@funbox/blueprinter-frontend/bin/index.js -i doc.apib -o index.html"
  }
}
```

## Использование через Docker

Для использования @funbox/blueprinter-frontend в Docker-контейнере нужно выполнить следующую команду в директории с вашей apib-документацией:

```
docker run \
  --rm \
  -v $(pwd):/app \
 funbox/blueprinter -i doc.apib -o index.html
```

При запуске контейнера необходимо примонтировать хост-директорию с документацией в некоторую директорию в контейнере,
и затем указать путь к apib-файлу относительно созданного в контейнере пути.

По умолчанию рабочей директорией образа задана директория `/app`, поэтому удобнее всего смонтировать хост-директорию непосредственно
в `/app`. Тогда в качестве параметра можно передать просто название файла `файл-с-документацией.apib`.

### Использование через Docker в режиме dev-сервера

Для запуска в контейнере в режиме dev-сервера нужно выполнить следующую команду в директории с вашей apib-документацией:

```
docker run \
  --rm \
  -v /$(pwd):/app \
  -p 3000:3000 \
  funbox/blueprinter -i doc.apib -s -p 3000
```

Если в качестве аргумента для @funbox/blueprinter-frontend указан порт, отличный от `3000`, то нужно также опубликовать его при запуске контейнера,
указав в параметрах опцию `-p port:port`.

**Внимание!** При завершении процесса dev-сервера через `ctrl/cmd+c` процесс с контейнером отсоединяется (переводится в `detached`),
но контейнер при этом остаётся запущенным.

Чтобы остановить контейнер, используйте команды:
```
$ docker ps # смотрим ID запущенного контейнера
$ docker stop <container> # останавливаем контейнер с указанным ID
```

### Использование Docker-контейнера в Windows

При запуске контейнера в Windows нужно добавлять слэш (`/`) перед вызовом `pwd`. Таким образом, команда будет выглядеть так:

```
docker run \
  --rm \
  -v /$(pwd):/app \
  funbox/blueprinter -i doc.apib -o index.html
```

Кроме того, примонтированная директория может быть пустой. Если это так, то убедитесь, что в настройках Docker Desktop for Windows,
в разделе Shared Drives включен шаринг нужного диска (стоит галка).
Если диск не расшарен, необходимо отметить его как shared, применить изменения и перезапустить Docker Desktop.
